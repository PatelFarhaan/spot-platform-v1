// Add this file to /etc/docker/daemon.json

// Make sure to first run loki container before creating this file
//{
//    "log-driver": "loki",
//    "log-opts": {
//        "loki-url": "http://localhost:3100/loki/api/v1/push",
//        "loki-batch-size": "400"
//    }
//}
{
   "experimental":true,
   "metrics-addr":"0.0.0.0:9323",
   "insecure-registries":[
      "vip-registry-cache.domain.tld:5000",
      "vip-registry-build.domain.tld:5001"
   ],
   "hosts":[
      "tcp://0.0.0.0:2375",
      "unix:///var/run/docker.sock"
   ],
   "log-driver": "json-file",
   "log-opts": {
      "tag": "{{.ImageName}}|{{.Name}}|{{.ImageFullID}}|{{.FullID}}"
   }
}

// Loki default config
{
    "debug" : true,
    "log-driver": "loki",
    "log-opts": {
        "loki-url": "http://env-a-manager.***REMOVED***/loki/api/v1/push",
        "loki-batch-size": "300"
    }
}